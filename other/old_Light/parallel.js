objTypes["parallel"]={p_name:"光線密度(1/px)",create:function(e){return{obj:{type:"parallel",p1:e,p2:graphs.point(e.x+gridSize,e.y),p:1},draggingPart:{part:2}}},draw:function(e,t){var n=t.getContext("2d");n.strokeStyle="rgb(0,255,0)";n.beginPath();n.moveTo(e.p1.x,e.p1.y);n.lineTo(e.p2.x,e.p2.y);n.stroke()},move:function(e,t,n){e.p1.x=e.p1.x+t;e.p1.y=e.p1.y+n;e.p2.x=e.p2.x+t;e.p2.y=e.p2.y+n;return e},clicked:function(e,t){if(mouseOnPoint(t,e.p1)){return{draggingPart:{part:1}}}if(mouseOnPoint(t,e.p2)){return{draggingPart:{part:2}}}if(mouseOnSegment(t,e)){return{draggingPart:{part:0,mouse1:t}}}return false},dragging:function(e,t,n){if(n.part==1){e.p1=t;return{obj:e}}if(n.part==2){e.p2=t;return{obj:e}}if(n.part==0){var r=n.mouse1.x-t.x;var i=n.mouse1.y-t.y;e.p1.x=e.p1.x-r;e.p1.y=e.p1.y-i;e.p2.x=e.p2.x-r;e.p2.y=e.p2.y-i;return{obj:e,draggingPart:{part:0,mouse1:t}}}},shoot:function(e){var t=Math.atan2(e.p1.x-e.p2.x,e.p1.y-e.p2.y)-Math.PI/2;var n=graphs.length_segment(e)*e.p;var r=(e.p2.x-e.p1.x)/n;var s=(e.p2.y-e.p1.y)/n;for(i=0;i<=n;i++){x=e.p1.x+i*r;y=e.p1.y+i*s;addRay(graphs.ray(graphs.point(x,y),graphs.point(x+Math.sin(t),y+Math.cos(t))))}}}
