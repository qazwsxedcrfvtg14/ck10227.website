objTypes["laser"]={create:function(e){return{obj:{type:"laser",p1:e,p2:graphs.point(e.x+gridSize,e.y)},draggingPart:{part:2}}},draw:function(e,t){var n=t.getContext("2d");n.fillStyle="rgb(255,0,0)";n.fillRect(e.p1.x-2,e.p1.y-2,5,5);n.fillRect(e.p2.x-2,e.p2.y-2,3,3)},move:function(e,t,n){e.p1.x=e.p1.x+t;e.p1.y=e.p1.y+n;e.p2.x=e.p2.x+t;e.p2.y=e.p2.y+n;return e},clicked:function(e,t){if(mouseOnPoint(t,e.p1)){return{draggingPart:{part:1}}}if(mouseOnPoint(t,e.p2)){return{draggingPart:{part:2}}}if(mouseOnSegment(t,e)){return{draggingPart:{part:0,mouse1:t}}}return false},dragging:function(e,t,n){if(n.part==1){e.p1=t;return{obj:e}}if(n.part==2){e.p2=t;return{obj:e}}if(n.part==0){var r=n.mouse1.x-t.x;var i=n.mouse1.y-t.y;e.p1.x=e.p1.x-r;e.p1.y=e.p1.y-i;e.p2.x=e.p2.x-r;e.p2.y=e.p2.y-i;return{obj:e,draggingPart:{part:0,mouse1:t}}}},shoot:function(e){addRay(graphs.ray(e.p1,e.p2))}}
