var graphs={point:function(e,t){return{type:"point",x:e,y:t,exist:true}},line:function(e,t){return{type:"line",p1:e,p2:t,exist:true}},ray:function(e,t){return{type:"ray",p1:e,p2:t,exist:true}},line_segment:function(e,t){return{type:"line_segment",p1:e,p2:t,exist:true}},segment:function(e,t){return{type:"line_segment",p1:e,p2:t,exist:true}},circle:function(e,t){if(typeof t=="object"&&t.type=="point"){return{type:"circle",c:e,r:this.line_segment(e,t),exist:true}}else{return{type:"circle",c:e,r:t,exist:true}}},intersection:function(e,t){if(e.type=="line"&&t.type=="line"){return this.intersection_2line(e,t)}if(e.type=="line"&&t.type=="circle"){return this.intersection_line_circle(e,t)}if(e.type=="circle"&&t.type=="line"){return this.intersection_line_circle(t,e)}if(e.type=="circle"&&t.type=="circle"){return this.intersection_2circle(e,t)}},intersection_2line:function(e,t){var n,r,i,s,o,u;if(Math.abs(e.p2.x-e.p1.x)<1e-8){r=e.p1.x;i=(t.p2.y-t.p1.y)/(t.p2.x-t.p1.x);s=t.p1.y-i*t.p1.x;o=r;u=i*r+s}if(Math.abs(t.p2.x-t.p1.x)<1e-8){n=(e.p2.y-e.p1.y)/(e.p2.x-e.p1.x);r=e.p1.y-n*e.p1.x;s=t.p1.x;o=s;u=n*s+r}if(!(Math.abs(e.p2.x-e.p1.x)<1e-8)&&!(Math.abs(t.p2.x-t.p1.x)<1e-8)){n=(e.p2.y-e.p1.y)/(e.p2.x-e.p1.x);r=e.p1.y-n*e.p1.x;i=(t.p2.y-t.p1.y)/(t.p2.x-t.p1.x);s=t.p1.y-i*t.p1.x;o=(s-r)/(n-i);u=n*o+r}return graphs.point(o,u)},intersection_line_circle:function(e,t){var n,r,i,s,o,u,a,f;var l=new Array;var c=new Array;var h=new Array;if(Math.abs(e.p2.x-e.p1.x)<1e-8){r=e.p1.x;i=t.c.x;s=t.c.y;o=typeof t.r=="object"?Math.sqrt(Math.pow(t.r.p1.x-t.r.p2.x,2)+Math.pow(t.r.p1.y-t.r.p2.y,2)):t.r;l[1]=r;l[2]=r;c[1]=(2*s+Math.sqrt(Math.pow(2*s,2)-4*(Math.pow(l[1]-i,2)+Math.pow(s,2)-Math.pow(o,2))))/2;c[2]=(2*s-Math.sqrt(Math.pow(2*s,2)-4*(Math.pow(l[2]-i,2)+Math.pow(s,2)-Math.pow(o,2))))/2}else{n=(e.p2.y-e.p1.y)/(e.p2.x-e.p1.x);r=e.p1.y-n*e.p1.x;i=t.c.x;s=t.c.y;o=typeof t.r=="object"?Math.sqrt(Math.pow(t.r.p1.x-t.r.p2.x,2)+Math.pow(t.r.p1.y-t.r.p2.y,2)):t.r;u=1+Math.pow(n,2);a=-2*i+2*n*r-2*s*n;f=Math.pow(i,2)+Math.pow(r,2)-2*s*r+Math.pow(s,2)-Math.pow(o,2);l[1]=(-a+Math.sqrt(Math.pow(a,2)-4*u*f))/(2*u);l[2]=(-a-Math.sqrt(Math.pow(a,2)-4*u*f))/(2*u);c[1]=n*l[1]+r;c[2]=n*l[2]+r}h[1]=graphs.point(l[1],c[1]);h[2]=graphs.point(l[2],c[2]);return h},intersection_2circle:function(e,t){var n,r,i,s,o,u,a,f,l,c,h;var p=new Array;var d=new Array;var v=new Array;n=e.c.x;r=e.c.y;i=typeof e.r=="object"?Math.sqrt(Math.pow(e.r.p1.x-e.r.p2.x,2)+Math.pow(e.r.p1.y-e.r.p2.y,2)):e.r;s=t.c.x;o=t.c.y;u=typeof t.r=="object"?Math.sqrt(Math.pow(t.r.p1.x-t.r.p2.x,2)+Math.pow(t.r.p1.y-t.r.p2.y,2)):t.r;a=(2*o-2*r)/(2*s-2*n);f=(-Math.pow(n,2)-Math.pow(r,2)+Math.pow(i,2)+Math.pow(s,2)+Math.pow(o,2)-Math.pow(u,2))/(2*s-2*n);if(Math.abs(s-n)<1e-8){a=(Math.pow(n,2)+Math.pow(r,2)-Math.pow(i,2)-Math.pow(s,2)-Math.pow(o,2)+Math.pow(u,2))/(2*o-2*r);l=1;c=-2*n;h=Math.pow(a,2)+2*r*a+Math.pow(n,2)+Math.pow(r,2)-Math.pow(i,2);d[1]=-a;d[2]=-a;p[1]=(-c+Math.sqrt(Math.pow(c,2)-4*l*h))/(2*l);p[2]=(-c-Math.sqrt(Math.pow(c,2)-4*l*h))/(2*l)}else{a=(2*o-2*r)/(2*s-2*n);f=(-Math.pow(n,2)-Math.pow(r,2)+Math.pow(i,2)+Math.pow(s,2)+Math.pow(o,2)-Math.pow(u,2))/(2*s-2*n);l=Math.pow(a,2)+1;c=2*-a*f-2*n*-a-2*r;h=Math.pow(f,2)-2*n*f+Math.pow(n,2)+Math.pow(r,2)-Math.pow(i,2);d[1]=(-c+Math.sqrt(Math.pow(c,2)-4*l*h))/(2*l);d[2]=(-c-Math.sqrt(Math.pow(c,2)-4*l*h))/(2*l);p[1]=-a*d[1]+f;p[2]=-a*d[2]+f}v[1]=graphs.point(p[1],d[1]);v[2]=graphs.point(p[2],d[2]);return v},length_segment:function(e){return Math.sqrt(Math.pow(e.p1.x-e.p2.x,2)+Math.pow(e.p1.y-e.p2.y,2))},length:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},midpoint:function(e){var t=graphs.intersection_2circle(graphs.circle(e.p1,e.p2),graphs.circle(e.p2,e.p1));return graphs.intersection_2line(e,graphs.line(t[1],t[2]))},perpendicular_bisector:function(e){var t=graphs.intersection_2circle(graphs.circle(e.p1,e.p2),graphs.circle(e.p2,e.p1));return graphs.line(t[1],t[2])},parallel:function(e,t){var n=graphs.circle(e.p1,t);var r=graphs.intersection(e,n)[1];var i=graphs.circle(r,e.p1);var s=graphs.circle(t,e.p1);var o=graphs.intersection(i,s);if(Math.abs(o[2].x-e.p1.x)<1e-5&&Math.abs(o[2].y-e.p1.y)<1e-5){return graphs.line(o[1],t)}else{return graphs.line(o[2],t)}}};var canvasPainter={draw:function(e,t,n){var r=t.getContext("2d");if(e.type=="point"){if(typeof n=="undefined"){r.fillStyle="red"}else{r.fillStyle=n}r.fillRect(e.x-2,e.y-2,5,5)}if(e.type=="line"){if(typeof n=="undefined"){r.strokeStyle="black"}else{r.strokeStyle=n}r.beginPath();i=Math.atan2(e.p2.x-e.p1.x,e.p2.y-e.p1.y);s=Math.abs(e.p1.x)+Math.abs(e.p1.y)+t.height+t.width;r.moveTo(e.p1.x-Math.sin(i)*s,e.p1.y-Math.cos(i)*s);r.lineTo(e.p1.x+Math.sin(i)*s,e.p1.y+Math.cos(i)*s);r.stroke()}if(e.type=="ray"){if(typeof n=="undefined"){r.strokeStyle="black"}else{r.strokeStyle=n}var i,s;r.beginPath();i=Math.atan2(e.p2.x-e.p1.x,e.p2.y-e.p1.y);s=Math.abs(e.p1.x)+Math.abs(e.p1.y)+t.height+t.width;r.moveTo(e.p1.x,e.p1.y);r.lineTo(e.p1.x+Math.sin(i)*s,e.p1.y+Math.cos(i)*s);r.stroke()}if(e.type=="line_segment"){if(typeof n=="undefined"){r.strokeStyle="black"}else{r.strokeStyle=n}r.beginPath();r.moveTo(e.p1.x,e.p1.y);r.lineTo(e.p2.x,e.p2.y);r.stroke()}if(e.type=="circle"){if(typeof n=="undefined"){r.strokeStyle="black"}else{r.strokeStyle=n}r.beginPath();if(typeof e.r=="object"){r.arc(e.c.x,e.c.y,Math.sqrt(Math.pow(e.r.p1.x-e.r.p2.x,2)+Math.pow(e.r.p1.y-e.r.p2.y,2)),0,Math.PI*2,false)}else{r.arc(e.c.x,e.c.y,e.r,0,Math.PI*2,false)}r.stroke()}},cls:function(e){var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)}}
